{"version":3,"sources":["components/Book.js","components/Books.js"],"names":["Book","props","order","onClick","className","_id","name","Books","useState","data","setData","newBook","setNewBook","useEffect","getOrders","a","Axios","get","process","response","ordersData","console","log","onClickEdit","id","put","editOrder","error","onSubmit","e","preventDefault","post","addOrder","type","onChange","target","value","map","item"],"mappings":"sNAEe,SAASA,EAAKC,GAC3B,IAAOC,EAAkBD,EAAlBC,MAAOC,EAAWF,EAAXE,QACd,OACE,qBAAKC,UAAU,QAAQD,QAAS,kBAAMA,EAAQD,EAAMG,MAApD,SACI,4BAAIH,EAAMI,S,MCDH,SAASC,IACtB,MAAwBC,mBAAS,IAAjC,mBAAOC,EAAP,KAAaC,EAAb,KACA,EAA8BF,mBAAS,IAAvC,mBAAOG,EAAP,KAAgBC,EAAhB,KA6BAC,qBAAU,WACR,IAAMC,EAAS,uCAAG,8BAAAC,EAAA,sEACOC,IAAMC,IAAN,UAClBC,mCADkB,qBADP,OACVC,EADU,OAIVC,EAAaD,EAASV,KAC5BC,EAAQU,GACRC,QAAQC,IAAIF,GANI,2CAAH,qDAQfC,QAAQC,IAAI,UACZR,IACAO,QAAQC,IAAI,qCACX,IAEH,IAoBMC,EAAc,SAACC,GACnBH,QAAQC,IAAI,eACZ,KACiB,uCAAG,4BAAAP,EAAA,sEACOC,IAAMS,IAC3B,UAAGP,mCAAH,eAAoDM,EACpD,CACElB,KAAMK,IAJM,OACVQ,EADU,OAOEA,EAASV,KAPX,2CAAH,qDAWfiB,GACA,MAAOC,MAGX,OACE,sBAAKvB,UAAU,MAAf,UACE,uBAAMwB,SAxCO,SAACC,GAChBR,QAAQC,IAAI,UACZO,EAAEC,iBACF,KACgB,uCAAG,4BAAAf,EAAA,sEACQC,IAAMe,KAAN,UAClBb,mCADkB,UAErB,CACEZ,KAAMK,IAJK,OACTQ,EADS,OAOGA,EAASV,KAPZ,2CAAH,qDAWduB,GACApB,EAAW,IACX,MAAOe,MAuBP,UACE,uBACEM,KAAK,OACLC,SAAU,SAACL,GAAD,OAAOjB,EAAWiB,EAAEM,OAAOC,QACrCA,MAAOzB,IAET,wBAAQsB,KAAK,SAAb,uBAGF,uBACA,qBAAK7B,UAAU,cAAf,SACGK,GAAQA,EAAK4B,KAAI,SAACC,GACjB,OAAO,oCAAqB,cAACtC,EAAD,CAAME,MAAOoC,EAAMnC,QAASoB,IAAjD,MAAUe,EAAKjC","file":"static/js/4.ea39d810.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nexport default function Book(props) {\r\n  const {order, onClick} = props\r\n  return (\r\n    <div className='order' onClick={() => onClick(order._id)}>\r\n        <p>{order.name}</p>\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Book from \"./Book\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport default function Books() {\r\n  const [data, setData] = useState([]);\r\n  const [newBook, setNewBook] = useState(\"\");\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"Client: Socket.io stands by...\");\r\n  //   // const socket = io('ws://localhost:5000')\r\n  //   const socket = io(`${process.env.REACT_APP_BACKEND_URL}`);\r\n  //   socket.on(\"connnection\", () => {\r\n  //     console.log(\"connected to server\");\r\n  //   });\r\n\r\n  //   socket.on(\"order-added\", (newOrders) => {\r\n  //     console.log(\"Client: order-added\");\r\n  //     setData(newOrders);\r\n  //   });\r\n\r\n  //   socket.on(\"order-edit\", (orders) => {\r\n  //     console.log(\"Client: order-edit\");\r\n  //     setData(orders);\r\n  //   });\r\n\r\n  //   // socket.on('message', (message) => {\r\n  //   //   console.log(message);\r\n  //   // })\r\n\r\n  //   socket.on(\"disconnect\", () => {\r\n  //     console.log(\"Socket disconnecting\");\r\n  //   });\r\n  // }, []);\r\n\r\n  useEffect(() => {\r\n    const getOrders = async () => {\r\n      const response = await Axios.get(\r\n        `${process.env.REACT_APP_BACKEND_URL}/api/books/lists`\r\n      );\r\n      const ordersData = response.data;\r\n      setData(ordersData);\r\n      console.log(ordersData);\r\n    };\r\n    console.log(\"finish\")\r\n    getOrders();\r\n    console.log(\"Client: Get data the first time\");\r\n  }, []);\r\n\r\n  const onSubmit = (e) => {\r\n    console.log(\"Submit\");\r\n    e.preventDefault();\r\n    try {\r\n      const addOrder = async () => {\r\n        const response = await Axios.post(\r\n          `${process.env.REACT_APP_BACKEND_URL}/books`,\r\n          {\r\n            name: newBook,\r\n          }\r\n        );\r\n        const orderData = response.data;\r\n        //   console.log(orderData)\r\n        //   setData(orderData);\r\n      };\r\n      addOrder();\r\n      setNewBook(\"\");\r\n    } catch (error) {}\r\n  };\r\n\r\n  const onClickEdit = (id) => {\r\n    console.log(\"Submit Edit\");\r\n    try {\r\n      const editOrder = async () => {\r\n        const response = await Axios.put(\r\n          `${process.env.REACT_APP_BACKEND_URL}/api/books/` + id,\r\n          {\r\n            name: newBook,\r\n          }\r\n        );\r\n        const orderData = response.data;\r\n        //   console.log(orderData)\r\n        //   setData(orderData);\r\n      };\r\n      editOrder();\r\n    } catch (error) {}\r\n  };\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          onChange={(e) => setNewBook(e.target.value)}\r\n          value={newBook}\r\n        />\r\n        <button type=\"submit\">submit</button>\r\n      </form>\r\n\r\n      <hr />\r\n      <div className=\"orders-list\">\r\n        {data && data.map((item) => {\r\n          return <div key={item._id}> <Book order={item} onClick={onClickEdit} /> </div>\r\n        })}\r\n        {/* {data.length !== 0 && data.map((order) => {\r\n         <React.Fragment>\r\n          <div className='order' onClick={() => onClickEdit(order._id)}>\r\n          <p>{order.name}</p>\r\n          </div>\r\n          </React.Fragment>\r\n       }}) */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}